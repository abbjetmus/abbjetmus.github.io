import{b6 as A,q as D,r as p,ad as F,x as v,w as b,k as u,ak as x,ae as V,z as i,n as r,ah as g,l as c,m as k,b7 as L,F as S,b8 as N,u as $,p as K,aj as M,af as X}from"./index.463fd7b7.js";import{Q as G}from"./QSelect.a267c1ca.js";import{u as H,Q as J}from"./useAuthValidations.16162f5c.js";import{Q as O}from"./QPage.c59b67f7.js";import{u as T}from"./QMenu.0ae6bc81.js";import{a as W,e as q,d as I,n as Y,p as Z}from"./auth.789194bf.js";import"./QChip.fc634365.js";import"./QItem.bb578711.js";import"./selection.02efc4d4.js";const ee={class:"row"},le={class:"col q-mr-md"},te={class:"row col justify-center items-center q-gutter-md q-mb-lg"},ae={style:{height:"85%"}},se={class:"q-mt-md"},oe=D({__name:"CreateScreenPage",setup(ne){const Q=W(q(I,"presentations")),o=p(1),n=p(2),s=p([[{row:0,column:0,presentationId:null},{row:0,column:1,presentationId:null}]]),f=p(""),C=T(),j=F(),{form:h,validInputs:m,loading:w}=H(),E=v(()=>`col-${12/n.value}`),P=v(()=>({height:`${100/o.value}%`})),B=v(()=>Array.from({length:o.value},(a,e)=>e+1)),U=v(()=>Array.from({length:n.value},(a,e)=>e+1));b(o,a=>{if(a>0&&n.value>0){s.value=[];for(let e=0;e<a;e++){const l=[];for(let t=0;t<n.value;t++)l.push({row:e,column:t,presentationId:null});s.value.push(l)}}}),b(n,a=>{if(a>0&&o.value>0){s.value=[];for(let e=0;e<o.value;e++){const l=[];for(let t=0;t<a;t++)l.push({row:e,column:t,presentationId:null});s.value.push(l)}}});const R=a=>{if(a===null)return"Du m\xE5ste v\xE4lja presentationer!"},y=a=>{if(a<1)return"Du m\xE5ste v\xE4lja postivt heltal!"},z=()=>{m.value=!1,h.value!=null&&h.value.validate().then(async a=>{if(a){w.value=!0,m.value=!0;const e=[];for(let t=0;t<s.value.length;t++){const d=s.value[t];for(let _=0;_<d.length;_++)e.push(d[_])}const l={name:f.value,columns:n.value,rows:o.value,createdAt:Y.now(),presentations:e};await Z(q(I,"screens"),l),C.notify({color:"success",position:"bottom",message:"Sliden har lagts till!"}),j.go(-1)}else m.value=!1;w.value=!1}).catch(a=>{m.value=!1})};return(a,e)=>(u(),x(O,{class:"q-pa-md full-height"},{default:V(()=>[i(J,{ref_key:"form",ref:h,class:"full-height",onSubmit:X(z,["prevent"]),greedy:""},{default:V(()=>[r("div",ee,[r("div",le,[i(g,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=l=>f.value=l),required:"",outlined:"",label:"Sk\xE4rmens namn"},null,8,["modelValue"])]),r("div",te,[e[3]||(e[3]=r("div",null,"Dimensioner",-1)),i(g,{label:"Rader",type:"number",rules:[y],outlined:"",modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value=l),style:{width:"100px"}},null,8,["rules","modelValue"]),e[4]||(e[4]=r("div",null,"X",-1)),i(g,{label:"Kolumner",type:"number",rules:[y],outlined:"",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value=l),style:{width:"100px"}},null,8,["rules","modelValue"])])]),r("div",ae,[(u(!0),c(S,null,k(B.value,l=>(u(),c("div",{class:"row nalle",key:l,style:L(P.value)},[(u(!0),c(S,null,k(U.value,t=>(u(),c("div",{class:N(["full-height flex flex-center",E.value]),key:t},[s.value[l-1][t-1]?(u(),x(G,{key:0,"emit-value":"","map-options":"",style:{"min-width":"300px"},outlined:"",required:"",modelValue:s.value[l-1][t-1].presentationId,"onUpdate:modelValue":d=>s.value[l-1][t-1].presentationId=d,rules:[R],options:$(Q),"option-label":"name","option-value":"id",label:"Presentation"},null,8,["modelValue","onUpdate:modelValue","rules","options"])):K("",!0)],2))),128))],4))),128))]),r("div",se,[i(M,{unelevated:"",type:"submit",color:"primary",label:"Skapa sk\xE4rmen"})])]),_:1},512)]),_:1}))}});var he=A(oe,[["__scopeId","data-v-66126f54"]]);export{he as default};
