import{bb as N,ab as $,r as v,ad as z,v as f,w as x,k as u,ak as S,ae as k,y as i,n as r,ag as w,l as h,m as I,u as d,F as Q,ai as K,aj as M,b6 as X,b7 as G,p as H,bc as J,bd as O}from"./index.22e0c437.js";import{Q as T}from"./QSelect.6d80f3dc.js";import{u as W,Q as Y}from"./useAuthValidations.fb647b60.js";import{Q as Z}from"./QPage.1b78fe8b.js";import{u as ee}from"./position-engine.30b6c244.js";import{a as te,e as q,d as C,n as le,p as oe}from"./auth.e4f82d86.js";import"./QChip.4115dc3f.js";import"./QItem.0384ab86.js";import"./QItemLabel.7f8c2ca3.js";import"./QMenu.cf956b92.js";import"./selection.44dfb399.js";const j=m=>(J("data-v-88b9ac4e"),m=m(),O(),m),ae={class:"row"},se={class:"col q-mr-md"},ne={class:"row col justify-center items-center q-gutter-md q-mb-lg"},re=j(()=>r("div",null,"Dimensioner",-1)),ue=j(()=>r("div",null,"X",-1)),ie={style:{height:"85%"}},de={class:"q-mt-md"},me=$({__name:"CreateScreenPage",setup(m){const E=te(q(C,"presentations")),s=v(1),n=v(2),a=v([[{row:0,column:0,presentationId:null},{row:0,column:1,presentationId:null}]]),_=v(""),P=ee(),B=z(),{form:g,validInputs:c,loading:y}=W(),U=f(()=>`col-${12/n.value}`),R=f(()=>({height:`${100/s.value}%`})),A=f(()=>Array.from({length:s.value},(l,e)=>e+1)),D=f(()=>Array.from({length:n.value},(l,e)=>e+1));x(s,l=>{if(console.log("rows",l),l>0&&n.value>0){a.value=[];for(let e=0;e<l;e++){const t=[];for(let o=0;o<n.value;o++)t.push({row:e,column:o,presentationId:null});a.value.push(t)}}}),x(n,l=>{if(console.log("rows",l),l>0&&s.value>0){a.value=[];for(let e=0;e<s.value;e++){const t=[];for(let o=0;o<l;o++)t.push({row:e,column:o,presentationId:null});a.value.push(t)}}});const F=l=>{if(l===null)return"Du m\xE5ste v\xE4lja presentationer!"},V=l=>{if(l<1)return"Du m\xE5ste v\xE4lja postivt heltal!"},L=()=>{c.value=!1,g.value!=null&&g.value.validate().then(async l=>{if(l){y.value=!0,c.value=!0;const e=[];for(let o=0;o<a.value.length;o++){const p=a.value[o];for(let b=0;b<p.length;b++)e.push(p[b])}const t={name:_.value,columns:n.value,rows:s.value,createdAt:le.now(),presentations:e};await oe(q(C,"screens"),t),P.notify({color:"success",position:"bottom",message:"Sliden har lagts till!"}),B.go(-1)}else c.value=!1;y.value=!1}).catch(l=>{c.value=!1})};return(l,e)=>(u(),S(Z,{class:"q-pa-md full-height"},{default:k(()=>[i(Y,{ref_key:"form",ref:g,class:"full-height",onSubmit:M(L,["prevent"]),greedy:""},{default:k(()=>[r("div",ae,[r("div",se,[i(w,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),required:"",outlined:"",label:"Sk\xE4rmens namn"},null,8,["modelValue"])]),r("div",ne,[re,i(w,{label:"Rader",type:"number",rules:[V],outlined:"",modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value=t),style:{width:"100px"}},null,8,["rules","modelValue"]),ue,i(w,{label:"Kolumner",type:"number",rules:[V],outlined:"",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=t=>n.value=t),style:{width:"100px"}},null,8,["rules","modelValue"])])]),r("div",ie,[(u(!0),h(Q,null,I(d(A),t=>(u(),h("div",{class:"row nalle",key:t,style:X(d(R))},[(u(!0),h(Q,null,I(d(D),o=>(u(),h("div",{class:G(["full-height flex flex-center",d(U)]),key:o},[a.value[t-1][o-1]?(u(),S(T,{key:0,"emit-value":"","map-options":"",style:{"min-width":"300px"},outlined:"",required:"",modelValue:a.value[t-1][o-1].presentationId,"onUpdate:modelValue":p=>a.value[t-1][o-1].presentationId=p,rules:[F],options:d(E),"option-label":"name","option-value":"id",label:"Presentation"},null,8,["modelValue","onUpdate:modelValue","rules","options"])):H("",!0)],2))),128))],4))),128))]),r("div",de,[i(K,{unelevated:"",type:"submit",color:"primary",label:"Skapa sk\xE4rmen"})])]),_:1},8,["onSubmit"])]),_:1}))}});var xe=N(me,[["__scopeId","data-v-88b9ac4e"]]);export{xe as default};
