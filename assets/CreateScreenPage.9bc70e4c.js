import{ba as A,q as D,r as p,ad as F,x as c,w as b,k as u,ak as x,ae as V,z as i,n as r,ah as w,l as v,m as k,b6 as L,F as S,b7 as N,u as $,p as K,aj as M,af as X}from"./index.308153eb.js";import{Q as G}from"./QSelect.e0420423.js";import{u as H,Q as J}from"./useAuthValidations.005ae75a.js";import{Q as O}from"./QPage.78ed50f3.js";import{u as T}from"./QMenu.5d07a248.js";import{a as W,e as q,d as I,n as Y,p as Z}from"./auth.4b2e518d.js";import"./QChip.d711d643.js";import"./QItem.dcfa4b1a.js";import"./QItemLabel.63614090.js";import"./selection.78640de4.js";const ee={class:"row"},le={class:"col q-mr-md"},te={class:"row col justify-center items-center q-gutter-md q-mb-lg"},ae={style:{height:"85%"}},oe={class:"q-mt-md"},se=D({__name:"CreateScreenPage",setup(ne){const Q=W(q(I,"presentations")),s=p(1),n=p(2),o=p([[{row:0,column:0,presentationId:null},{row:0,column:1,presentationId:null}]]),f=p(""),C=T(),j=F(),{form:h,validInputs:m,loading:_}=H(),E=c(()=>`col-${12/n.value}`),P=c(()=>({height:`${100/s.value}%`})),B=c(()=>Array.from({length:s.value},(t,e)=>e+1)),U=c(()=>Array.from({length:n.value},(t,e)=>e+1));b(s,t=>{if(console.log("rows",t),t>0&&n.value>0){o.value=[];for(let e=0;e<t;e++){const l=[];for(let a=0;a<n.value;a++)l.push({row:e,column:a,presentationId:null});o.value.push(l)}}}),b(n,t=>{if(console.log("rows",t),t>0&&s.value>0){o.value=[];for(let e=0;e<s.value;e++){const l=[];for(let a=0;a<t;a++)l.push({row:e,column:a,presentationId:null});o.value.push(l)}}});const R=t=>{if(t===null)return"Du m\xE5ste v\xE4lja presentationer!"},y=t=>{if(t<1)return"Du m\xE5ste v\xE4lja postivt heltal!"},z=()=>{m.value=!1,h.value!=null&&h.value.validate().then(async t=>{if(t){_.value=!0,m.value=!0;const e=[];for(let a=0;a<o.value.length;a++){const d=o.value[a];for(let g=0;g<d.length;g++)e.push(d[g])}const l={name:f.value,columns:n.value,rows:s.value,createdAt:Y.now(),presentations:e};await Z(q(I,"screens"),l),C.notify({color:"success",position:"bottom",message:"Sliden har lagts till!"}),j.go(-1)}else m.value=!1;_.value=!1}).catch(t=>{m.value=!1})};return(t,e)=>(u(),x(O,{class:"q-pa-md full-height"},{default:V(()=>[i(J,{ref_key:"form",ref:h,class:"full-height",onSubmit:X(z,["prevent"]),greedy:""},{default:V(()=>[r("div",ee,[r("div",le,[i(w,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=l=>f.value=l),required:"",outlined:"",label:"Sk\xE4rmens namn"},null,8,["modelValue"])]),r("div",te,[e[3]||(e[3]=r("div",null,"Dimensioner",-1)),i(w,{label:"Rader",type:"number",rules:[y],outlined:"",modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value=l),style:{width:"100px"}},null,8,["rules","modelValue"]),e[4]||(e[4]=r("div",null,"X",-1)),i(w,{label:"Kolumner",type:"number",rules:[y],outlined:"",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value=l),style:{width:"100px"}},null,8,["rules","modelValue"])])]),r("div",ae,[(u(!0),v(S,null,k(B.value,l=>(u(),v("div",{class:"row nalle",key:l,style:L(P.value)},[(u(!0),v(S,null,k(U.value,a=>(u(),v("div",{class:N(["full-height flex flex-center",E.value]),key:a},[o.value[l-1][a-1]?(u(),x(G,{key:0,"emit-value":"","map-options":"",style:{"min-width":"300px"},outlined:"",required:"",modelValue:o.value[l-1][a-1].presentationId,"onUpdate:modelValue":d=>o.value[l-1][a-1].presentationId=d,rules:[R],options:$(Q),"option-label":"name","option-value":"id",label:"Presentation"},null,8,["modelValue","onUpdate:modelValue","rules","options"])):K("",!0)],2))),128))],4))),128))]),r("div",oe,[i(M,{unelevated:"",type:"submit",color:"primary",label:"Skapa sk\xE4rmen"})])]),_:1},512)]),_:1}))}});var ge=A(se,[["__scopeId","data-v-c7f2b1dc"]]);export{ge as default};
