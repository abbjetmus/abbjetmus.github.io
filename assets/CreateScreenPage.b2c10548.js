import{b0 as N,a8 as $,r as v,t as f,w as x,k as u,ai as S,ac as I,aa as z,ab as i,n as r,ae as b,l as h,m as k,u as m,F as Q,ag as K,ah as M,aD as X,aE as G,p as H,b1 as J,b2 as O}from"./index.ae99ad44.js";import{Q as T}from"./QSelect.bf464c4b.js";import{u as W,Q as Y}from"./useAuthValidations.a8b861ea.js";import{Q as Z}from"./QPage.19f16d6a.js";import{u as ee}from"./position-engine.8177d215.js";import{a as te,e as q,d as C,n as le,p as oe}from"./auth.da776fb7.js";import"./QChip.e62993a1.js";import"./QItem.4a94c215.js";import"./QItemLabel.69499165.js";import"./QMenu.46e28889.js";import"./format.2a3572e1.js";import"./selection.dacc8383.js";const E=d=>(J("data-v-88b9ac4e"),d=d(),O(),d),ae={class:"row"},se={class:"col q-mr-md"},ne={class:"row col justify-center items-center q-gutter-md q-mb-lg"},re=E(()=>r("div",null,"Dimensioner",-1)),ue=E(()=>r("div",null,"X",-1)),ie={style:{height:"85%"}},me={class:"q-mt-md"},de=$({__name:"CreateScreenPage",setup(d){const j=te(q(C,"presentations")),s=v(1),n=v(2),a=v([[{row:0,column:0,presentationId:null},{row:0,column:1,presentationId:null}]]),_=v(""),P=ee(),B=z(),{form:g,validInputs:c,loading:y}=W(),U=f(()=>`col-${12/n.value}`),D=f(()=>({height:`${100/s.value}%`})),R=f(()=>Array.from({length:s.value},(l,e)=>e+1)),A=f(()=>Array.from({length:n.value},(l,e)=>e+1));x(s,l=>{if(console.log("rows",l),l>0&&n.value>0){a.value=[];for(let e=0;e<l;e++){const t=[];for(let o=0;o<n.value;o++)t.push({row:e,column:o,presentationId:null});a.value.push(t)}}}),x(n,l=>{if(console.log("rows",l),l>0&&s.value>0){a.value=[];for(let e=0;e<s.value;e++){const t=[];for(let o=0;o<l;o++)t.push({row:e,column:o,presentationId:null});a.value.push(t)}}});const F=l=>{if(l===null)return"Du m\xE5ste v\xE4lja presentationer!"},V=l=>{if(l<1)return"Du m\xE5ste v\xE4lja postivt heltal!"},L=()=>{c.value=!1,g.value!=null&&g.value.validate().then(async l=>{if(l){y.value=!0,c.value=!0;const e=[];for(let o=0;o<a.value.length;o++){const p=a.value[o];for(let w=0;w<p.length;w++)e.push(p[w])}const t={name:_.value,columns:n.value,rows:s.value,createdAt:le.now(),presentations:e};await oe(q(C,"screens"),t),P.notify({color:"success",position:"bottom",message:"Sliden har lagts till!"}),B.go(-1)}else c.value=!1;y.value=!1}).catch(l=>{c.value=!1})};return(l,e)=>(u(),S(Z,{class:"q-pa-md full-height"},{default:I(()=>[i(Y,{ref_key:"form",ref:g,class:"full-height",onSubmit:M(L,["prevent"]),greedy:""},{default:I(()=>[r("div",ae,[r("div",se,[i(b,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),required:"",outlined:"",label:"Sk\xE4rmens namn"},null,8,["modelValue"])]),r("div",ne,[re,i(b,{label:"Rader",type:"number",rules:[V],outlined:"",modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value=t),style:{width:"100px"}},null,8,["rules","modelValue"]),ue,i(b,{label:"Kolumner",type:"number",rules:[V],outlined:"",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=t=>n.value=t),style:{width:"100px"}},null,8,["rules","modelValue"])])]),r("div",ie,[(u(!0),h(Q,null,k(m(R),t=>(u(),h("div",{class:"row nalle",key:t,style:X(m(D))},[(u(!0),h(Q,null,k(m(A),o=>(u(),h("div",{class:G(["full-height flex flex-center",m(U)]),key:o},[a.value[t-1][o-1]?(u(),S(T,{key:0,"emit-value":"","map-options":"",style:{"min-width":"300px"},outlined:"",required:"",modelValue:a.value[t-1][o-1].presentationId,"onUpdate:modelValue":p=>a.value[t-1][o-1].presentationId=p,rules:[F],options:m(j),"option-label":"name","option-value":"id",label:"Presentation"},null,8,["modelValue","onUpdate:modelValue","rules","options"])):H("",!0)],2))),128))],4))),128))]),r("div",me,[i(K,{unelevated:"",type:"submit",color:"primary",label:"Skapa sk\xE4rmen"})])]),_:1},8,["onSubmit"])]),_:1}))}});var Se=N(de,[["__scopeId","data-v-88b9ac4e"]]);export{Se as default};
