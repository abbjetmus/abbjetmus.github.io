import{h as L,r as S,l as F,ac as I,a as n,ad as d,a3 as a,f as l,a2 as s,ae as v,a9 as f,c as p,e as N,a4 as b,F as E,aa as U,a6 as k,g as _,a5 as T,a8 as j}from"./index.56596687.js";import{u as P,a as R,Q as $,b as D,c as w,d as M}from"./useAuthValidations.c62abfe1.js";import{Q as z}from"./QPage.dec982fa.js";import{B as A,u as G}from"./index.8ffea743.js";import{u as H}from"./slides.74b2a72d.js";import"./vue-quill.snow.3ff57131.js";import"./auth.17d318c2.js";const J={class:"q-mb-md row q-col-gutter-md"},K={class:"row col-4 align-items"},O=l("div",{class:"text-h5 q-mr-lg"},"V\xE4nster Sektion Slides",-1),W=l("div",{class:"text-h5 col-8 text-center"},null,-1),X={class:"row q-col-gutter-md"},Y={class:"col-4"},Z={class:"col-8 row justify-center"},ee={class:"full-width"},te={class:"row justify-between"},le={class:"col-auto"},ae={key:0},se={key:1},fe=L({__name:"LeftSlidesPage",setup(oe){const Q=S({name:"blotFormatter",module:A,options:{}}),c=G(),u=H(),{form:m,validInputs:r,loading:h}=P(),e=S(null),q=()=>{r.value=!1,m.value!=null&&m.value.validate().then(async o=>{if(o)if(h.value=!0,r.value=!0,y.value){let i=await u.addLeftSlide(e.value);e.value.id=i.id,c.notify({color:"success",position:"bottom",message:"Sliden har lagts till!"})}else await u.updateLeftSlide(e.value),c.notify({color:"success",position:"bottom",message:"Sliden har uppdaterats!"});else r.value=!1;h.value=!1}).catch(o=>{r.value=!1})},y=F(()=>{var o;return((o=e.value)==null?void 0:o.id)==null}),V=o=>{e.value=o},x=()=>{e.value={title:"",content:"",time:5}},C=async()=>{e.value!=null&&(await u.deleteLeftSlide(e.value.id),c.notify({color:"success",position:"bottom",message:"Sliden har tagits bort!"}),e.value=null)};return(o,i)=>{const B=I("QuillEditor");return n(),d(z,{class:"q-pa-md"},{default:a(()=>[l("div",J,[l("div",K,[O,s(f,{color:"primary",unelevated:"",class:"col",onClick:x},{default:a(()=>[v("Ny Slide ")]),_:1})]),W]),l("div",X,[l("div",Y,[s(R,{bordered:"",separator:"",clickable:""},{default:a(()=>[(n(!0),p(E,null,N(b(u).leftSlides,t=>{var g;return n(),d(D,{class:"q-py-md",clickable:"",key:t.id,active:((g=e.value)==null?void 0:g.id)==t.id,onClick:ie=>V(t)},{default:a(()=>[s(w,null,{default:a(()=>[s(M,{lines:"2"},{default:a(()=>[v(T(t.title),1)]),_:2},1024)]),_:2},1024),s(w,{side:""},{default:a(()=>[s(j,{name:"chevron_right"})]),_:1})]),_:2},1032,["active","onClick"])}),128))]),_:1})]),l("div",Z,[l("div",ee,[e.value?(n(),d($,{key:0,ref_key:"form",ref:m,onSubmit:U(q,["prevent"]),greedy:""},{default:a(()=>[e.value?(n(),d(k,{key:0,label:"Titel",modelValue:e.value.title,"onUpdate:modelValue":i[0]||(i[0]=t=>e.value.title=t),outlined:"",required:"",rules:[t=>t.length>0]},null,8,["modelValue","rules"])):_("",!0),e.value?(n(),d(k,{key:1,label:"Visningstid f\xF6r sliden",modelValue:e.value.time,"onUpdate:modelValue":i[1]||(i[1]=t=>e.value.time=t),outlined:"",required:"",type:"number",class:"q-mb-lg"},null,8,["modelValue"])):_("",!0),l("div",null,[s(B,{modules:Q.value,style:{"min-height":"400px"},theme:"snow",toolbar:"full",content:e.value.content,"onUpdate:content":i[2]||(i[2]=t=>e.value.content=t),contentType:"html"},null,8,["modules","content"])]),l("div",te,[l("div",le,[s(f,{color:"green-5",style:{width:"200px"},class:"q-mt-md q-mr-md",type:"submit"},{default:a(()=>[b(y)?(n(),p("span",ae,"Skapa")):(n(),p("span",se,"Uppdatera"))]),_:1})]),s(f,{color:"red",style:{width:"200px"},class:"q-mt-md col-auto",onClick:C},{default:a(()=>[v("Radera")]),_:1})])]),_:1},8,["onSubmit"])):_("",!0)])])])]),_:1})}}});export{fe as default};
