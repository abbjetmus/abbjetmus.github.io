import{a0 as F,r as k,i as E,a as n,ac as c,a4 as s,f as i,a3 as t,af as m,aa as f,c as b,e as P,a5 as v,F as $,ab as j,g as V,a7 as Q,a6 as D,a9 as R}from"./index.39db9170.js";import{Q as T,a as M,b as q,c as O}from"./QList.884ff65c.js";import{u as z,Q as A}from"./useAuthValidations.137e7181.js";import{Q as G}from"./QPage.dd43d8e7.js";import{u as H,_ as J,v as K}from"./v4.2c6f98c4.js";import{u as W}from"./slides.3367b17f.js";import{E as X}from"./style.de2193f9.js";import{a as Y}from"./auth.1bedbfc0.js";const Z={class:"row q-col-gutter-md"},ee={class:"col-3"},ae={class:"row justify-between q-mb-md"},le=i("div",{class:"text-h5 q-mr-lg"},"V\xE4nster Sektion Slides",-1),te={class:"col-9 row justify-center"},se={class:"full-width full-height"},oe={class:"row justify-between q-mb-md"},ie={class:"col-auto"},ne={key:0},de={key:1},ye=F({__name:"LeftSlidesPage",setup(ue){const p=H(),u=W(),{form:_,validInputs:r,loading:w}=z(),e=k(null),g=k(!1),x=()=>{r.value=!1,_.value!=null&&_.value.validate().then(async o=>{if(o)if(w.value=!0,r.value=!0,y.value){let l=await u.addLeftSlide(e.value);e.value.id=l.id,p.notify({color:"success",position:"bottom",message:"Sliden har lagts till!"})}else await u.updateLeftSlide(e.value),p.notify({color:"success",position:"bottom",message:"Sliden har uppdaterats!"});else r.value=!1;w.value=!1}).catch(o=>{r.value=!1})},y=E(()=>{var o;return((o=e.value)==null?void 0:o.id)==null}),I=o=>{e.value=o},C=()=>{e.value={title:"",content:"Ny slide",time:5}},U=async()=>{e.value!=null&&(await u.deleteLeftSlide(e.value.id),p.notify({color:"success",position:"bottom",message:"Sliden har tagits bort!"}),e.value=null)},L=async(o,l)=>{const a=await Promise.all(o.map(d=>new Promise((S,N)=>{const B=K();Y(d,"images",B).then(h=>S(h)).catch(h=>N(h))})));l(a.map(d=>d))};return(o,l)=>(n(),c(G,{class:"q-pa-md"},{default:s(()=>[i("div",Z,[i("div",ee,[i("div",ae,[le,t(f,{color:"primary",unelevated:"",class:"col",onClick:C},{default:s(()=>[m("Ny Slide ")]),_:1})]),t(T,{bordered:"",separator:"",clickable:""},{default:s(()=>[(n(!0),b($,null,P(v(u).leftSlides,a=>{var d;return n(),c(M,{class:"q-py-md",clickable:"",key:a.id,active:((d=e.value)==null?void 0:d.id)==a.id,onClick:S=>I(a)},{default:s(()=>[t(q,null,{default:s(()=>[t(O,{lines:"2"},{default:s(()=>[m(D(a.title),1)]),_:2},1024)]),_:2},1024),t(q,{side:""},{default:s(()=>[t(R,{name:"chevron_right"})]),_:1})]),_:2},1032,["active","onClick"])}),128))]),_:1})]),i("div",te,[i("div",se,[e.value?(n(),c(A,{key:0,ref_key:"form",ref:_,onSubmit:j(x,["prevent"]),greedy:""},{default:s(()=>[i("div",oe,[i("div",ie,[t(f,{color:"green-5",style:{width:"200px"},type:"submit"},{default:s(()=>[v(y)?(n(),b("span",ne,"Skapa")):(n(),b("span",de,"Uppdatera"))]),_:1}),t(f,{class:"q-ml-md",style:{width:"200px"},color:"primary",onClick:l[0]||(l[0]=a=>g.value=!0)},{default:s(()=>[m("Bilder ")]),_:1})]),v(y)?V("",!0):(n(),c(f,{key:0,color:"red",style:{width:"200px"},class:"col-auto",onClick:U},{default:s(()=>[m("Radera")]),_:1}))]),t(Q,{label:"Titel",modelValue:e.value.title,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.title=a),outlined:"",required:"",class:"q-mb-md"},null,8,["modelValue"]),t(Q,{label:"Visningstid f\xF6r sliden",modelValue:e.value.time,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.time=a),outlined:"",required:"",type:"number",class:"q-mb-lg"},null,8,["modelValue"]),i("div",null,[t(v(X),{modelValue:e.value.content,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.content=a),language:"en-US",onOnUploadImg:L},null,8,["modelValue"])])]),_:1},8,["onSubmit"])):V("",!0)])])]),t(J,{show:g.value,"onUpdate:show":l[4]||(l[4]=a=>g.value=a)},null,8,["show"])]),_:1}))}});export{ye as default};
