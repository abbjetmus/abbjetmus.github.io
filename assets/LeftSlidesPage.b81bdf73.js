import{h as F,r as f,l as I,ac as N,a as n,ad as d,a3 as a,f as l,a2 as o,ae as p,a9 as _,c as h,e as E,a4 as k,F as U,aa as T,a6 as w,g as y,a5 as j,a8 as P}from"./index.50f4dfc3.js";import{u as R,a as $,Q as D,b as M,c as Q,d as z}from"./useAuthValidations.f0ac2928.js";import{Q as A}from"./QPage.c029f7a8.js";import{B as G,u as H}from"./index.be017473.js";import{u as J}from"./slides.1059e94c.js";import"./vue-quill.snow.3ff57131.js";import"./auth.6c77705e.js";const K={class:"q-mb-md row q-col-gutter-md"},O={class:"row col-4 align-items"},W=l("div",{class:"text-h5 q-mr-lg"},"V\xE4nster Sektion Slides",-1),X=l("div",{class:"text-h5 col-8 text-center"},null,-1),Y={class:"row q-col-gutter-md"},Z={class:"col-4"},ee={class:"col-8 row justify-center"},te={class:"full-width"},le={class:"row justify-between"},ae={class:"col-auto"},se={key:0},oe={key:1},pe=F({__name:"LeftSlidesPage",setup(ie){const q=f({name:"blotFormatter",module:G,options:{}}),c=H(),u=J(),{form:m,validInputs:r,loading:g}=R(),e=f(null),v=f(null),V=()=>{r.value=!1,m.value!=null&&m.value.validate().then(async s=>{if(s)if(g.value=!0,r.value=!0,S.value){let i=await u.addLeftSlide(e.value);e.value.id=i.id,c.notify({color:"success",position:"bottom",message:"Sliden har lagts till!"})}else await u.updateLeftSlide(e.value),c.notify({color:"success",position:"bottom",message:"Sliden har uppdaterats!"});else r.value=!1;g.value=!1}).catch(s=>{r.value=!1})},S=I(()=>{var s;return((s=e.value)==null?void 0:s.id)==null}),x=s=>{v.value&&v.value.setContents(s.content,"api"),e.value=s},C=()=>{e.value={title:"",content:"",time:5}},B=async()=>{e.value!=null&&(await u.deleteLeftSlide(e.value.id),c.notify({color:"success",position:"bottom",message:"Sliden har tagits bort!"}),e.value=null)};return(s,i)=>{const L=N("QuillEditor");return n(),d(A,{class:"q-pa-md"},{default:a(()=>[l("div",K,[l("div",O,[W,o(_,{color:"primary",unelevated:"",class:"col",onClick:C},{default:a(()=>[p("Ny Slide ")]),_:1})]),X]),l("div",Y,[l("div",Z,[o($,{bordered:"",separator:"",clickable:""},{default:a(()=>[(n(!0),h(U,null,E(k(u).leftSlides,t=>{var b;return n(),d(M,{class:"q-py-md",clickable:"",key:t.id,active:((b=e.value)==null?void 0:b.id)==t.id,onClick:ne=>x(t)},{default:a(()=>[o(Q,null,{default:a(()=>[o(z,{lines:"2"},{default:a(()=>[p(j(t.title),1)]),_:2},1024)]),_:2},1024),o(Q,{side:""},{default:a(()=>[o(P,{name:"chevron_right"})]),_:1})]),_:2},1032,["active","onClick"])}),128))]),_:1})]),l("div",ee,[l("div",te,[e.value?(n(),d(D,{key:0,ref_key:"form",ref:m,onSubmit:T(V,["prevent"]),greedy:""},{default:a(()=>[e.value?(n(),d(w,{key:0,label:"Titel",modelValue:e.value.title,"onUpdate:modelValue":i[0]||(i[0]=t=>e.value.title=t),outlined:"",required:"",rules:[t=>t.length>0]},null,8,["modelValue","rules"])):y("",!0),e.value?(n(),d(w,{key:1,label:"Visningstid f\xF6r sliden",modelValue:e.value.time,"onUpdate:modelValue":i[1]||(i[1]=t=>e.value.time=t),outlined:"",required:"",type:"number",class:"q-mb-lg"},null,8,["modelValue"])):y("",!0),l("div",null,[o(L,{ref_key:"editor",ref:v,modules:q.value,style:{"min-height":"400px"},theme:"snow",toolbar:"full",content:e.value.content,"onUpdate:content":i[2]||(i[2]=t=>e.value.content=t),contentType:"html"},null,8,["modules","content"])]),l("div",le,[l("div",ae,[o(_,{color:"green-5",style:{width:"200px"},class:"q-mt-md q-mr-md",type:"submit"},{default:a(()=>[k(S)?(n(),h("span",se,"Skapa")):(n(),h("span",oe,"Uppdatera"))]),_:1})]),o(_,{color:"red",style:{width:"200px"},class:"q-mt-md col-auto",onClick:B},{default:a(()=>[p("Radera")]),_:1})])]),_:1},8,["onSubmit"])):y("",!0)])])])]),_:1})}}});export{pe as default};
