import{a8 as E,r as k,t as P,k as n,ai as u,ac as s,n as i,ab as a,al as m,ag as c,l as b,m as $,u as f,F as j,ah as D,p as V,ae as Q,ad as R,af as T}from"./index.ae99ad44.js";import{Q as M}from"./QItemLabel.69499165.js";import{Q as O,a as q}from"./QItem.4a94c215.js";import{Q as z}from"./QList.10a153e4.js";import{u as A,Q as G}from"./useAuthValidations.a8b861ea.js";import{Q as H}from"./QPage.19f16d6a.js";import{u as J}from"./position-engine.8177d215.js";import{_ as K}from"./ImagesDialog.ce6e48e6.js";import{E as W}from"./style.f3f92b51.js";import{a as X,e as Y,d as Z,c as ee}from"./auth.da776fb7.js";import{u as te}from"./slides.49ccb33e.js";import{v as le}from"./v4.c4aae7a6.js";import"./selection.dacc8383.js";import"./QTooltip.76f93be4.js";import"./ClosePopup.f83d1bdb.js";import"./QMenu.46e28889.js";const ae={class:"row q-col-gutter-md"},se={class:"col-3"},oe={class:"row justify-between q-mb-md"},ie=i("div",{class:"text-h5 q-mr-lg"},"V\xE4nster Sektion Slides",-1),ne={class:"col-9 row justify-center"},de={class:"full-width full-height"},re={class:"row justify-between q-mb-md"},ue={class:"col-auto"},me={key:0},ce={key:1},Ue=E({__name:"LeftSlidesPage",setup(fe){const x=X(Y(Z,"left-slides")),p=te(),v=J(),{form:_,validInputs:r,loading:w}=A(),e=k(null),g=k(!1),C=()=>{r.value=!1,_.value!=null&&_.value.validate().then(async o=>{if(o)if(w.value=!0,r.value=!0,y.value){let l=await p.addLeftSlide(e.value);e.value.id=l.id,v.notify({color:"success",position:"bottom",message:"Sliden har lagts till!"})}else await p.updateLeftSlide(e.value),v.notify({color:"success",position:"bottom",message:"Sliden har uppdaterats!"});else r.value=!1;w.value=!1}).catch(o=>{r.value=!1})},y=P(()=>{var o;return((o=e.value)==null?void 0:o.id)==null}),I=o=>{e.value=o},U=()=>{e.value={title:"",content:"Ny slide",time:5}},L=async()=>{e.value!=null&&(await p.deleteLeftSlide(e.value.id),v.notify({color:"success",position:"bottom",message:"Sliden har tagits bort!"}),e.value=null)},N=async(o,l)=>{const t=await Promise.all(o.map(d=>new Promise((S,B)=>{const F=le();ee(d,"images",F).then(h=>S(h)).catch(h=>B(h))})));l(t.map(d=>d))};return(o,l)=>(n(),u(H,{class:"q-pa-md"},{default:s(()=>[i("div",ae,[i("div",se,[i("div",oe,[ie,a(c,{color:"primary",unelevated:"",class:"col",onClick:U},{default:s(()=>[m("Ny Slide ")]),_:1})]),a(z,{bordered:"",separator:"",clickable:""},{default:s(()=>[(n(!0),b(j,null,$(f(x),t=>{var d;return n(),u(O,{class:"q-py-md",clickable:"",key:t.id,active:((d=e.value)==null?void 0:d.id)==t.id,onClick:S=>I(t)},{default:s(()=>[a(q,null,{default:s(()=>[a(M,{lines:"2"},{default:s(()=>[m(R(t.title),1)]),_:2},1024)]),_:2},1024),a(q,{side:""},{default:s(()=>[a(T,{name:"chevron_right"})]),_:1})]),_:2},1032,["active","onClick"])}),128))]),_:1})]),i("div",ne,[i("div",de,[e.value?(n(),u(G,{key:0,ref_key:"form",ref:_,onSubmit:D(C,["prevent"]),greedy:""},{default:s(()=>[i("div",re,[i("div",ue,[a(c,{color:"green-5",style:{width:"200px"},type:"submit"},{default:s(()=>[f(y)?(n(),b("span",me,"Skapa")):(n(),b("span",ce,"Uppdatera"))]),_:1}),a(c,{class:"q-ml-md",style:{width:"200px"},color:"primary",onClick:l[0]||(l[0]=t=>g.value=!0)},{default:s(()=>[m("Bilder ")]),_:1})]),f(y)?V("",!0):(n(),u(c,{key:0,color:"red",style:{width:"200px"},class:"col-auto",onClick:L},{default:s(()=>[m("Radera")]),_:1}))]),a(Q,{label:"Titel",modelValue:e.value.title,"onUpdate:modelValue":l[1]||(l[1]=t=>e.value.title=t),outlined:"",required:"",class:"q-mb-md"},null,8,["modelValue"]),a(Q,{label:"Visningstid f\xF6r sliden",modelValue:e.value.time,"onUpdate:modelValue":l[2]||(l[2]=t=>e.value.time=t),outlined:"",required:"",type:"number",class:"q-mb-lg"},null,8,["modelValue"]),i("div",null,[a(f(W),{modelValue:e.value.content,"onUpdate:modelValue":l[3]||(l[3]=t=>e.value.content=t),language:"en-US",onOnUploadImg:N},null,8,["modelValue"])])]),_:1},8,["onSubmit"])):V("",!0)])])]),a(K,{show:g.value,"onUpdate:show":l[4]||(l[4]=t=>g.value=t)},null,8,["show"])]),_:1}))}});export{Ue as default};
