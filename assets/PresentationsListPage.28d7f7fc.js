import{h as N,a8 as C,r as b,w as E,k as r,ai as v,ac as o,ab as t,aK as $,ah as B,aL as k,ae as I,n as i,ag as y,Y as D,al as L,aM as M,aN as T,aa as F,u as P,l as q,m as R,F as U,ad as j}from"./index.ae99ad44.js";import{Q as A,a as z}from"./QItem.4a94c215.js";import{Q as H}from"./QList.10a153e4.js";import{Q as K}from"./QPage.19f16d6a.js";import{e as S,I as O,M as Y,p as G,g as J,s as x,d as h,y as W,n as X,a as Z}from"./auth.da776fb7.js";import{u as ee,Q as te}from"./useAuthValidations.a8b861ea.js";import{Q as ae}from"./QTooltip.76f93be4.js";import{C as se}from"./ClosePopup.f83d1bdb.js";import{u as oe}from"./position-engine.8177d215.js";import"./selection.dacc8383.js";const w="presentations",ne=N({id:"presentations-module",state(){return{presentations:[],presentationsSubscription:null}},getters:{getPresentations(){const e=[];return this.presentations.forEach(a=>e.push(a)),e}},actions:{setup(){const e=S(h,w);this.presentationsSubscription=O(Y(e),a=>{this.presentations=[],a.forEach(n=>{this.presentations.push({...n.data(),id:n.id})})})},dispose(){this.presentationsSubscription&&(this.presentations=[],this.presentationsSubscription())},async addPresentation(e){return await G(S(h,w),e)},async updatePresentation(e){var a;await J(x(h,w,(a=e.id)!=null?a:""),{})},async deletePresentation(e){await W(x(h,w,e))}}}),ie=i("div",{class:"text-h5 q-mb-sm"},"Ny Presentation",-1),re={class:"row justify-between q-mt-sm"},le={class:"absolute-top-right q-pa-xs"},ue=C({__name:"NewPresentationDialog",props:{show:{type:Boolean,required:!0}},emits:["update:show"],setup(e,{emit:a}){const n=e,{form:p,validInputs:l,loading:c}=ee(),u=ne(),s=b(""),Q=oe(),m=b(!1),V=()=>{l.value=!1,p.value!=null&&p.value.validate().then(async f=>{if(f){c.value=!0,l.value=!0;const d={name:s.value,slides:[],createdAt:X.now()};await u.addPresentation(d),Q.notify({color:"success",position:"bottom",message:"Sliden har lagts till!"}),_()}else l.value=!1;c.value=!1}).catch(f=>{l.value=!1})};E(()=>n.show,f=>{m.value=f});const _=()=>{m.value=!1,a("update:show",m.value)};return(f,d)=>(r(),v(T,{padding:"",modelValue:m.value,"onUpdate:modelValue":d[1]||(d[1]=g=>m.value=g),onBeforeHide:_},{default:o(()=>[t(M,{style:{"min-width":"500px"}},{default:o(()=>[t($,null,{default:o(()=>[t(te,{ref_key:"form",ref:p,onSubmit:B(V,["prevent"]),greedy:""},{default:o(()=>[ie,t(k),t(I,{outlined:"",modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=g=>s.value=g),label:"Presentationens namn",required:"",class:"q-my-lg"},null,8,["modelValue"]),t(k),i("div",re,[t(y,{type:"submit",color:"primary",unelevated:"",label:"Skapa"}),t(y,{flat:"",color:"primary",label:"avbryt",onClick:_})])]),_:1},8,["onSubmit"])]),_:1}),i("div",le,[D((r(),v(y,{round:"",flat:"",color:"grey-7",icon:"clear",onClick:_},{default:o(()=>[t(ae,null,{default:o(()=>[L("St\xE4ng")]),_:1})]),_:1})),[[se]])])]),_:1})]),_:1},8,["modelValue"]))}}),de={class:"row q-mb-lg"},pe=i("h5",{class:"q-my-none q-mr-md"},"Mina presentationer",-1),ce={class:"row justify-between"},me={class:"row q-gutter-md"},fe={key:1,class:"text-h6 q-py-none q-my-none"},Pe=C({__name:"PresentationsListPage",setup(e){const a=Z(S(h,"presentations")),n=b(!1),p=F(),l=async c=>{await p.push(`create-presentation/${c}`)};return(c,u)=>(r(),v(K,{class:"q-pa-md"},{default:o(()=>[i("div",de,[pe,t(y,{icon:"add",color:"primary",label:"Skapa ny presentation",onClick:u[0]||(u[0]=s=>n.value=!0)})]),P(a).length>0?(r(),v(H,{key:0,bordered:"",separator:"",clickable:""},{default:o(()=>[(r(!0),q(U,null,R(P(a),s=>(r(),v(A,{key:s.id,class:"q-py-md"},{default:o(()=>[t(z,null,{default:o(()=>[i("div",ce,[i("div",null,j(s.name),1),i("div",me,[t(y,{size:"sm",icon:"edit",label:"redigera",onClick:Q=>l(s.id),color:"primary",style:{width:"200px"}},null,8,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(r(),q("h6",fe," Du har inte skapat n\xE5gra presentationer \xE4n! ")),t(ue,{show:n.value,"onUpdate:show":u[1]||(u[1]=s=>n.value=s)},null,8,["show"])]),_:1}))}});export{Pe as default};
