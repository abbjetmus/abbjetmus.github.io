import{h as j,q as N,r as Q,w as L,k as l,ak as f,ae as t,a$ as R,z as e,bb as z,af as F,n as u,bc as P,ah as U,aj as v,a1 as B,an as I,bd as A,ad as H,u as q,l as x,m as O,ag as G,F as J}from"./index.308153eb.js";import{Q as C,a as V}from"./QItem.dcfa4b1a.js";import{Q as $}from"./QList.5939a205.js";import{u as K,Q as W}from"./QMenu.5d07a248.js";import{Q as X}from"./QPage.78ed50f3.js";import{C as D}from"./ClosePopup.4442d74e.js";import{e as S,I as Y,M as Z,p as ee,g as te,s as E,d as h,y as se,n as ae,a as ne}from"./auth.4b2e518d.js";import{u as oe,Q as ie}from"./useAuthValidations.005ae75a.js";import{Q as re}from"./QTooltip.d37076cb.js";import"./selection.78640de4.js";const g="presentations",M=j({id:"presentations-module",state(){return{presentations:[],presentationsSubscription:null}},getters:{getPresentations(){const s=[];return this.presentations.forEach(a=>s.push(a)),s}},actions:{setup(){const s=S(h,g);this.presentationsSubscription=Y(Z(s),a=>{this.presentations=[],a.forEach(c=>{this.presentations.push({...c.data(),id:c.id})})})},dispose(){this.presentationsSubscription&&(this.presentations=[],this.presentationsSubscription())},async addPresentation(s){return await ee(S(h,g),s)},async updatePresentation(s){var a;await te(E(h,g,(a=s.id)!=null?a:""),{})},async deletePresentation(s){await se(E(h,g,s))}}}),le={class:"row justify-between q-mt-sm"},ue={class:"absolute-top-right q-pa-xs"},de=N({__name:"NewPresentationDialog",props:{show:{type:Boolean,required:!0}},emits:["update:show"],setup(s,{emit:a}){const c=s,{form:d,validInputs:m,loading:w}=oe(),_=M(),r=Q(""),n=a,i=K(),p=Q(!1),T=()=>{m.value=!1,d.value!=null&&d.value.validate().then(async y=>{if(y){w.value=!0,m.value=!0;const o={name:r.value,slides:[],createdAt:ae.now()};await _.addPresentation(o),i.notify({color:"success",position:"bottom",message:"Sliden har lagts till!"}),b()}else m.value=!1;w.value=!1}).catch(y=>{m.value=!1})};L(()=>c.show,y=>{p.value=y});const b=()=>{p.value=!1,n("update:show",p.value)};return(y,o)=>(l(),f(R,{padding:"",modelValue:p.value,"onUpdate:modelValue":o[1]||(o[1]=k=>p.value=k),onBeforeHide:b},{default:t(()=>[e(A,{style:{"min-width":"500px"}},{default:t(()=>[e(z,null,{default:t(()=>[e(ie,{ref_key:"form",ref:d,onSubmit:F(T,["prevent"]),greedy:""},{default:t(()=>[o[2]||(o[2]=u("div",{class:"text-h5 q-mb-sm"},"Ny Presentation",-1)),e(P),e(U,{outlined:"",modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=k=>r.value=k),label:"Presentationens namn",required:"",class:"q-my-lg"},null,8,["modelValue"]),e(P),u("div",le,[e(v,{type:"submit",color:"primary",unelevated:"",label:"Skapa"}),e(v,{flat:"",color:"primary",label:"avbryt",onClick:b})])]),_:1},512)]),_:1}),u("div",ue,[B((l(),f(v,{round:"",flat:"",color:"grey-7",icon:"clear",onClick:b},{default:t(()=>[e(re,null,{default:t(()=>o[3]||(o[3]=[I("St\xE4ng")])),_:1})]),_:1})),[[D]])])]),_:1})]),_:1},8,["modelValue"]))}}),pe={class:"row q-mb-lg"},ce={class:"row justify-between"},me={class:"row justify-center items-center"},fe={key:1,class:"text-h6 q-py-none q-my-none"},Pe=N({__name:"PresentationsListPage",setup(s){const a=ne(S(h,"presentations")),c=M(),d=Q(!1),m=H(),w=async r=>{await m.push(`create-presentation/${r}`)},_=async r=>{await c.deletePresentation(r)};return(r,n)=>(l(),f(X,{class:"q-pa-md"},{default:t(()=>[u("div",pe,[n[2]||(n[2]=u("h5",{class:"q-my-none q-mr-md"},"Mina presentationer",-1)),e(v,{icon:"add",color:"primary",label:"Skapa ny presentation",onClick:n[0]||(n[0]=i=>d.value=!0)})]),q(a).length>0?(l(),f($,{key:0,bordered:"",separator:"",clickable:""},{default:t(()=>[(l(!0),x(J,null,O(q(a),i=>(l(),f(C,{key:i.id,class:"q-py-md"},{default:t(()=>[e(V,null,{default:t(()=>[u("div",ce,[u("div",null,G(i.name),1),u("div",me,[e(v,{class:"q-mr-md",size:"sm",icon:"edit",label:"redigera",onClick:p=>w(i.id),color:"primary",style:{width:"200px"}},null,8,["onClick"]),e(v,{icon:"more_vert",flat:"",unelevated:"",size:"sm"},{default:t(()=>[e(W,{"touch-position":""},{default:t(()=>[e($,{style:{"min-width":"160px"}},{default:t(()=>[B((l(),f(C,{clickable:"",onClick:p=>_(i.id)},{default:t(()=>[e(V,null,{default:t(()=>n[3]||(n[3]=[I("Radera")])),_:1})]),_:2},1032,["onClick"])),[[D]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(l(),x("h6",fe," Du har inte skapat n\xE5gra presentationer \xE4n! ")),e(de,{show:d.value,"onUpdate:show":n[1]||(n[1]=i=>d.value=i)},null,8,["show"])]),_:1}))}});export{Pe as default};
