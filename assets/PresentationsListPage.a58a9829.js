import{h as E,ab as C,r as b,w as N,k as r,ak as v,ae as o,y as t,be as $,aj as B,bf as k,ag as I,n as i,ai as y,a0 as D,an as T,bg as L,aQ as M,ad as j,u as P,l as q,m as F,F as R,af as U}from"./index.22e0c437.js";import{Q as A,a as z}from"./QItem.0384ab86.js";import{Q as H}from"./QList.456f2e4f.js";import{Q as O}from"./QPage.1b78fe8b.js";import{e as S,I as G,M as J,p as K,g as W,s as x,d as h,y as X,n as Y,a as Z}from"./auth.e4f82d86.js";import{u as ee,Q as te}from"./useAuthValidations.fb647b60.js";import{Q as ae}from"./QTooltip.11836e92.js";import{C as se}from"./ClosePopup.6b10e1d9.js";import{u as oe}from"./position-engine.30b6c244.js";import"./selection.44dfb399.js";const w="presentations",ne=E({id:"presentations-module",state(){return{presentations:[],presentationsSubscription:null}},getters:{getPresentations(){const e=[];return this.presentations.forEach(a=>e.push(a)),e}},actions:{setup(){const e=S(h,w);this.presentationsSubscription=G(J(e),a=>{this.presentations=[],a.forEach(n=>{this.presentations.push({...n.data(),id:n.id})})})},dispose(){this.presentationsSubscription&&(this.presentations=[],this.presentationsSubscription())},async addPresentation(e){return await K(S(h,w),e)},async updatePresentation(e){var a;await W(x(h,w,(a=e.id)!=null?a:""),{})},async deletePresentation(e){await X(x(h,w,e))}}}),ie=i("div",{class:"text-h5 q-mb-sm"},"Ny Presentation",-1),re={class:"row justify-between q-mt-sm"},le={class:"absolute-top-right q-pa-xs"},ue=C({__name:"NewPresentationDialog",props:{show:{type:Boolean,required:!0}},emits:["update:show"],setup(e,{emit:a}){const n=e,{form:p,validInputs:l,loading:c}=ee(),u=ne(),s=b(""),Q=oe(),m=b(!1),V=()=>{l.value=!1,p.value!=null&&p.value.validate().then(async f=>{if(f){c.value=!0,l.value=!0;const d={name:s.value,slides:[],createdAt:Y.now()};await u.addPresentation(d),Q.notify({color:"success",position:"bottom",message:"Sliden har lagts till!"}),_()}else l.value=!1;c.value=!1}).catch(f=>{l.value=!1})};N(()=>n.show,f=>{m.value=f});const _=()=>{m.value=!1,a("update:show",m.value)};return(f,d)=>(r(),v(M,{padding:"",modelValue:m.value,"onUpdate:modelValue":d[1]||(d[1]=g=>m.value=g),onBeforeHide:_},{default:o(()=>[t(L,{style:{"min-width":"500px"}},{default:o(()=>[t($,null,{default:o(()=>[t(te,{ref_key:"form",ref:p,onSubmit:B(V,["prevent"]),greedy:""},{default:o(()=>[ie,t(k),t(I,{outlined:"",modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=g=>s.value=g),label:"Presentationens namn",required:"",class:"q-my-lg"},null,8,["modelValue"]),t(k),i("div",re,[t(y,{type:"submit",color:"primary",unelevated:"",label:"Skapa"}),t(y,{flat:"",color:"primary",label:"avbryt",onClick:_})])]),_:1},8,["onSubmit"])]),_:1}),i("div",le,[D((r(),v(y,{round:"",flat:"",color:"grey-7",icon:"clear",onClick:_},{default:o(()=>[t(ae,null,{default:o(()=>[T("St\xE4ng")]),_:1})]),_:1})),[[se]])])]),_:1})]),_:1},8,["modelValue"]))}}),de={class:"row q-mb-lg"},pe=i("h5",{class:"q-my-none q-mr-md"},"Mina presentationer",-1),ce={class:"row justify-between"},me={class:"row q-gutter-md"},fe={key:1,class:"text-h6 q-py-none q-my-none"},Pe=C({__name:"PresentationsListPage",setup(e){const a=Z(S(h,"presentations")),n=b(!1),p=j(),l=async c=>{await p.push(`create-presentation/${c}`)};return(c,u)=>(r(),v(O,{class:"q-pa-md"},{default:o(()=>[i("div",de,[pe,t(y,{icon:"add",color:"primary",label:"Skapa ny presentation",onClick:u[0]||(u[0]=s=>n.value=!0)})]),P(a).length>0?(r(),v(H,{key:0,bordered:"",separator:"",clickable:""},{default:o(()=>[(r(!0),q(R,null,F(P(a),s=>(r(),v(A,{key:s.id,class:"q-py-md"},{default:o(()=>[t(z,null,{default:o(()=>[i("div",ce,[i("div",null,U(s.name),1),i("div",me,[t(y,{size:"sm",icon:"edit",label:"redigera",onClick:Q=>l(s.id),color:"primary",style:{width:"200px"}},null,8,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(r(),q("h6",fe," Du har inte skapat n\xE5gra presentationer \xE4n! ")),t(ue,{show:n.value,"onUpdate:show":u[1]||(u[1]=s=>n.value=s)},null,8,["show"])]),_:1}))}});export{Pe as default};
