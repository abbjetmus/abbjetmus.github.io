import{Q as ce}from"./QPage.78ed50f3.js";import{a as ve,e as de,d as oe,b as fe,s as me}from"./auth.4b2e518d.js";import{L as pe,M as E,E as ge,N as he,O as z,P as O,S as J,V as j,U as W,r as R,x as f,w as I,g as G,G as ye,t as y,aB as xe,b1 as _e,B as Z,b2 as be,A as le,b3 as Ce,y as Pe,j as re,D as ie,b4 as ee,X as we,Z as qe,a2 as Se,b5 as ke,aj as X,ab as $e,q as ue,u as Q,k as P,ak as U,ae as K,p as se,l as F,m as Y,z as Ie,F as H,al as Ve,n as Ae,b6 as Be,b7 as Te}from"./index.308153eb.js";import{g as te,s as ne}from"./touch.70a9dd44.js";import{c as Ee}from"./selection.78640de4.js";import{M as Ne}from"./style.2520ccd4.js";function Fe(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((l,s)=>{const i=parseFloat(l);i&&(n[s]=i)}),n}var Me=pe({name:"touch-swipe",beforeMount(e,{value:n,arg:l,modifiers:s}){if(s.mouse!==!0&&E.has.touch!==!0)return;const i=s.mouseCapture===!0?"Capture":"",t={handler:n,sensitivity:Fe(l),direction:te(s),noop:ge,mouseStart(o){ne(o,t)&&he(o)&&(z(t,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(o,!0))},touchStart(o){if(ne(o,t)){const r=o.target;z(t,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","notPassiveCapture"],[r,"touchend","end","notPassiveCapture"]]),t.start(o)}},start(o,r){E.is.firefox===!0&&O(e,!0);const d=J(o);t.event={x:d.left,y:d.top,time:Date.now(),mouse:r===!0,dir:!1}},move(o){if(t.event===void 0)return;if(t.event.dir!==!1){j(o);return}const r=Date.now()-t.event.time;if(r===0)return;const d=J(o),m=d.left-t.event.x,u=Math.abs(m),c=d.top-t.event.y,p=Math.abs(c);if(t.event.mouse!==!0){if(u<t.sensitivity[1]&&p<t.sensitivity[1]){t.end(o);return}}else if(u<t.sensitivity[2]&&p<t.sensitivity[2])return;const h=u/r,_=p/r;t.direction.vertical===!0&&u<p&&u<100&&_>t.sensitivity[0]&&(t.event.dir=c<0?"up":"down"),t.direction.horizontal===!0&&u>p&&p<100&&h>t.sensitivity[0]&&(t.event.dir=m<0?"left":"right"),t.direction.up===!0&&u<p&&c<0&&u<100&&_>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&u<p&&c>0&&u<100&&_>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&u>p&&m<0&&p<100&&h>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&u>p&&m>0&&p<100&&h>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(j(o),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ee(),t.styleCleanup=k=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const b=()=>{document.body.classList.remove("no-pointer-events--children")};k===!0?setTimeout(b,50):b()}),t.handler({evt:o,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:r,distance:{x:u,y:p}})):t.end(o)},end(o){t.event!==void 0&&(W(t,"temp"),E.is.firefox===!0&&O(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),o!==void 0&&t.event.dir!==!1&&j(o),t.event=void 0)}};if(e.__qtouchswipe=t,s.mouse===!0){const o=s.mouseCapture===!0||s.mousecapture===!0?"Capture":"";z(t,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}E.has.touch===!0&&z(t,"main",[[e,"touchstart","touchStart",`passive${s.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const l=e.__qtouchswipe;l!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&l.end(),l.handler=n.value),l.direction=te(n.modifiers))},beforeUnmount(e){const n=e.__qtouchswipe;n!==void 0&&(W(n,"main"),W(n,"temp"),E.is.firefox===!0&&O(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchswipe)}});function De(){const e=new Map;return{getCache:function(n,l){return e[n]===void 0?e[n]=l:e[n]},getCacheWithFn:function(n,l){return e[n]===void 0?e[n]=l():e[n]}}}const Le={name:{required:!0},disable:Boolean},ae={setup(e,{slots:n}){return()=>y("div",{class:"q-panel scroll",role:"tabpanel"},Z(n.default))}},ze={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Qe=["update:modelValue","beforeTransition","transition"];function Re(){const{props:e,emit:n,proxy:l}=G(),{getCacheWithFn:s}=De();let i,t;const o=R(null),r=R(null);function d(a){const v=e.vertical===!0?"up":"left";C((l.$q.lang.rtl===!0?-1:1)*(a.direction===v?1:-1))}const m=f(()=>[[Me,d,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),u=f(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),c=f(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),p=f(()=>`--q-transition-duration: ${e.transitionDuration}ms`),h=f(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),_=f(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),k=f(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);I(()=>e.modelValue,(a,v)=>{const x=w(a)===!0?A(a):-1;t!==!0&&$(x===-1?0:x<A(v)?-1:1),o.value!==x&&(o.value=x,n("beforeTransition",a,v),ye(()=>{n("transition",a,v)}))});function b(){C(1)}function M(){C(-1)}function V(a){n("update:modelValue",a)}function w(a){return a!=null&&a!==""}function A(a){return i.findIndex(v=>v.props.name===a&&v.props.disable!==""&&v.props.disable!==!0)}function D(){return i.filter(a=>a.props.disable!==""&&a.props.disable!==!0)}function $(a){const v=a!==0&&e.animated===!0&&o.value!==-1?"q-transition--"+(a===-1?u.value:c.value):null;r.value!==v&&(r.value=v)}function C(a,v=o.value){let x=v+a;for(;x>-1&&x<i.length;){const S=i[x];if(S!==void 0&&S.props.disable!==""&&S.props.disable!==!0){$(a),t=!0,n("update:modelValue",S.props.name),setTimeout(()=>{t=!1});return}x+=a}e.infinite===!0&&i.length>0&&v!==-1&&v!==i.length&&C(a,a===-1?i.length:-1)}function B(){const a=A(e.modelValue);return o.value!==a&&(o.value=a),!0}function L(){const a=w(e.modelValue)===!0&&B()&&i[o.value];return e.keepAlive===!0?[y(be,_.value,[y(k.value===!0?s(h.value,()=>({...ae,name:h.value})):ae,{key:h.value,style:p.value},()=>a)])]:[y("div",{class:"q-panel scroll",style:p.value,key:h.value,role:"tabpanel"},[a])]}function g(){if(i.length!==0)return e.animated===!0?[y(xe,{name:r.value},L)]:L()}function q(a){return i=_e(Z(a.default,[])).filter(v=>v.props!==null&&v.props.slot===void 0&&w(v.props.name)===!0),i.length}function T(){return i}return Object.assign(l,{next:b,previous:M,goTo:V}),{panelIndex:o,panelDirectives:m,updatePanelsList:q,updatePanelIndex:B,getPanelContent:g,getEnabledPanels:D,getPanels:T,isValidPanelName:w,keepAliveProps:_,needsUniqueKeepAliveWrapper:k,goToPanelByOffset:C,goToPanel:V,nextPanel:b,previousPanel:M}}var Ue=le({name:"QCarouselSlide",props:{...Le,imgSrc:String},setup(e,{slots:n}){const l=f(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>y("div",{class:"q-carousel__slide",style:l.value},Z(n.default))}});let N=0;const Oe={fullscreen:Boolean,noRouteFullscreenExit:Boolean},je=["update:fullscreen","fullscreen"];function We(){const e=G(),{props:n,emit:l,proxy:s}=e;let i,t,o;const r=R(!1);Ce(e)===!0&&I(()=>s.$route.fullPath,()=>{n.noRouteFullscreenExit!==!0&&u()}),I(()=>n.fullscreen,c=>{r.value!==c&&d()}),I(r,c=>{l("update:fullscreen",c),l("fullscreen",c)});function d(){r.value===!0?u():m()}function m(){r.value!==!0&&(r.value=!0,o=s.$el.parentNode,o.replaceChild(t,s.$el),document.body.appendChild(s.$el),N++,N===1&&document.body.classList.add("q-body--fullscreen-mixin"),i={handler:u},ee.add(i))}function u(){r.value===!0&&(i!==void 0&&(ee.remove(i),i=void 0),o.replaceChild(s.$el,t),r.value=!1,N=Math.max(0,N-1),N===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),s.$el.scrollIntoView!==void 0&&setTimeout(()=>{s.$el.scrollIntoView()})))}return Pe(()=>{t=document.createElement("span")}),re(()=>{n.fullscreen===!0&&m()}),ie(u),Object.assign(s,{toggleFullscreen:d,setFullscreen:m,exitFullscreen:u}),{inFullscreen:r,toggleFullscreen:d}}const Xe=["top","right","bottom","left"],Ke=["regular","flat","outline","push","unelevated"];var Ye=le({name:"QCarousel",props:{...we,...ze,...Oe,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Ke.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>Xe.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...je,...Qe],setup(e,{slots:n}){const{proxy:{$q:l}}=G(),s=qe(e,l);let i,t;const{updatePanelsList:o,getPanelContent:r,panelDirectives:d,goToPanel:m,previousPanel:u,nextPanel:c,getEnabledPanels:p,panelIndex:h}=Re(),{inFullscreen:_}=We(),k=f(()=>_.value!==!0&&e.height!==void 0?{height:e.height}:{}),b=f(()=>e.vertical===!0?"vertical":"horizontal"),M=f(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(_.value===!0?" fullscreen":"")+(s.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${b.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${D.value}`:"")),V=f(()=>{const g=[e.prevIcon||l.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||l.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&l.lang.rtl===!0?g.reverse():g}),w=f(()=>e.navigationIcon||l.iconSet.carousel.navigationIcon),A=f(()=>e.navigationActiveIcon||w.value),D=f(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),$=f(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));I(()=>e.modelValue,()=>{e.autoplay&&(clearInterval(i),C())}),I(()=>e.autoplay,g=>{g?C():clearInterval(i)});function C(){const g=ke(e.autoplay)===!0?e.autoplay:5e3;i=setTimeout(g>=0?c:u,Math.abs(g))}re(()=>{e.autoplay&&C()}),ie(()=>{clearInterval(i)});function B(g,q){return y("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${g} q-carousel__navigation--${D.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[y("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},p().map(q))])}function L(){const g=[];if(e.navigation===!0){const q=n["navigation-icon"]!==void 0?n["navigation-icon"]:a=>y(X,{key:"nav"+a.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${a.active===!0?"":"in"}active`,...a.btnProps,onClick:a.onClick}),T=t-1;g.push(B("buttons",(a,v)=>{const x=a.props.name,S=h.value===v;return q({index:v,maxIndex:T,name:x,active:S,btnProps:{icon:S===!0?A.value:w.value,size:"sm",...$.value},onClick:()=>{m(x)}})}))}else if(e.thumbnails===!0){const q=e.controlColor!==void 0?` text-${e.controlColor}`:"";g.push(B("thumbnails",T=>{const a=T.props;return y("img",{key:"tmb#"+a.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${a.name===e.modelValue?"":"in"}active`+q,src:a.imgSrc||a["img-src"],onClick:()=>{m(a.name)}})}))}return e.arrows===!0&&h.value>=0&&((e.infinite===!0||h.value>0)&&g.push(y("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${b.value} absolute flex flex-center`},[y(X,{icon:V.value[0],...$.value,onClick:u})])),(e.infinite===!0||h.value<t-1)&&g.push(y("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${b.value} absolute flex flex-center`},[y(X,{icon:V.value[1],...$.value,onClick:c})]))),$e(n.control,g)}return()=>(t=o(n),y("div",{class:M.value,style:k.value},[Se("div",{class:"q-carousel__slides-container"},r(),"sl-cont",e.swipeable,()=>d.value)].concat(L())))}});const He=ue({__name:"CarouselComponent",props:{presentationId:{type:String,required:!0}},setup(e){const n=e;console.log(n.presentationId);const l=R(1),s=ve(de(oe,"presentations",n.presentationId,"slides"));return(i,t)=>Q(s).length>0?(P(),U(Ye,{key:0,animated:"",class:"full-height flex flex-center full-width",modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o),navigation:"",infinite:"","keep-alive":"",autoplay:Q(s)[l.value-1].time*1e3,"transition-duration":"500","transition-prev":"slide-right","transition-next":"slide-left"},{default:K(()=>[(P(!0),F(H,null,Y(Q(s),(o,r)=>(P(),U(Ue,{class:"full-height full-width flex flex-center",key:r,name:r+1},{default:K(()=>[Ie(Q(Ne),{modelValue:o.content,"onUpdate:modelValue":d=>o.content=d},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","autoplay"])):se("",!0)}}),Ge={class:"full-height full-width"},ot=ue({__name:"PreviewScreenPage",setup(e){const n=Ve(),l=fe(me(oe,"screens",`${n.params.id}`)),s=f(()=>l.value!=null?`col-${12/l.value.columns}`:""),i=f(()=>l.value!=null?{height:`${100/l.value.rows}%`}:""),t=f(()=>l.value!=null?Array.from({length:l.value.rows},(d,m)=>m+1):[]),o=f(()=>l.value!=null?Array.from({length:l.value.columns},(d,m)=>m+1):[]),r=f(()=>{if(l.value!=null){const d=[],m=l.value.presentations.map(c=>c.row+1),u=Math.max(...m);for(let c=1;c<=u;c++){const p=[...l.value.presentations.filter(h=>h.row==c-1)];d.push(p)}return d}else return[]});return(d,m)=>(P(),U(ce,{class:"row q-pa-md full-height"},{default:K(()=>[Ae("div",Ge,[(P(!0),F(H,null,Y(t.value,u=>(P(),F("div",{class:"row",key:u,style:Be(i.value)},[(P(!0),F(H,null,Y(o.value,c=>(P(),F("div",{class:Te(["full-height full-width",s.value]),key:c},[r.value.length>0&&r.value[u-1]&&r.value[u-1][c-1]?(P(),U(He,{key:0,"presentation-id":r.value[u-1][c-1].presentationId},null,8,["presentation-id"])):se("",!0)],2))),128))],4))),128))])]),_:1}))}});export{ot as default};
