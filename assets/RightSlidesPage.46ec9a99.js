import{$ as R,r as k,i as $,a as n,ab as c,a3 as s,f as i,a2 as t,ae as m,a9 as f,c as b,e as P,a4 as v,F as j,aa as E,g as V,a6 as Q,a5 as L,a8 as D}from"./index.334c6e8c.js";import{Q as T,a as H,b as q,c as M}from"./QList.9424d716.js";import{u as O,Q as z}from"./useAuthValidations.106d01a1.js";import{Q as A}from"./QPage.44080900.js";import{u as G,_ as J,v as K}from"./v4.d569de57.js";import{u as W}from"./slides.2c40f945.js";import{E as X}from"./style.54d09c95.js";import{a as Y}from"./auth.007680d0.js";const Z={class:"row q-col-gutter-md"},ee={class:"col-3"},ae={class:"row justify-between q-mb-md"},le=i("div",{class:"text-h5 q-mr-lg"},"H\xF6ger Sektion Slides",-1),te={class:"col-9 row justify-center"},se={class:"full-width full-height"},oe={class:"row justify-between q-mb-md"},ie={class:"col-auto"},ne={key:0},de={key:1},he=R({__name:"RightSlidesPage",setup(ue){const p=G(),u=W(),{form:_,validInputs:r,loading:w}=O(),g=k(!1),e=k(null),x=()=>{r.value=!1,_.value!=null&&_.value.validate().then(async o=>{if(o)if(w.value=!0,r.value=!0,h.value){let l=await u.addRightSlide(e.value);e.value.id=l.id,p.notify({color:"success",position:"bottom",message:"Sliden har lagts till!"})}else await u.updateRightSlide(e.value),p.notify({color:"success",position:"bottom",message:"Sliden har uppdaterats!"});else r.value=!1;w.value=!1}).catch(o=>{r.value=!1})},h=$(()=>{var o;return((o=e.value)==null?void 0:o.id)==null}),I=o=>{e.value=o},C=()=>{e.value={title:"",content:"Ny slide",time:5}},U=async()=>{e.value!=null&&(await u.deleteRightSlide(e.value.id),p.notify({color:"success",position:"bottom",message:"Sliden har tagits bort!"}),e.value=null)},N=async(o,l)=>{const a=await Promise.all(o.map(d=>new Promise((S,B)=>{const F=K();Y(d,"images",F).then(y=>S(y)).catch(y=>B(y))})));l(a.map(d=>d))};return(o,l)=>(n(),c(A,{class:"q-pa-md"},{default:s(()=>[i("div",Z,[i("div",ee,[i("div",ae,[le,t(f,{color:"primary",unelevated:"",class:"col",onClick:C},{default:s(()=>[m("Ny Slide ")]),_:1})]),t(T,{bordered:"",separator:"",clickable:""},{default:s(()=>[(n(!0),b(j,null,P(v(u).rightSlides,a=>{var d;return n(),c(H,{class:"q-py-md",clickable:"",key:a.id,active:((d=e.value)==null?void 0:d.id)==a.id,onClick:S=>I(a)},{default:s(()=>[t(q,null,{default:s(()=>[t(M,{lines:"2"},{default:s(()=>[m(L(a.title),1)]),_:2},1024)]),_:2},1024),t(q,{side:""},{default:s(()=>[t(D,{name:"chevron_right"})]),_:1})]),_:2},1032,["active","onClick"])}),128))]),_:1})]),i("div",te,[i("div",se,[e.value?(n(),c(z,{key:0,ref_key:"form",ref:_,onSubmit:E(x,["prevent"]),greedy:""},{default:s(()=>[i("div",oe,[i("div",ie,[t(f,{color:"green-5",style:{width:"200px"},type:"submit"},{default:s(()=>[v(h)?(n(),b("span",ne,"Skapa")):(n(),b("span",de,"Uppdatera"))]),_:1}),t(f,{class:"q-ml-md",style:{width:"200px"},color:"primary",onClick:l[0]||(l[0]=a=>g.value=!0)},{default:s(()=>[m("Bilder ")]),_:1})]),v(h)?V("",!0):(n(),c(f,{key:0,color:"red",style:{width:"200px"},class:"col-auto",onClick:U},{default:s(()=>[m("Radera")]),_:1}))]),t(Q,{label:"Titel",modelValue:e.value.title,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.title=a),outlined:"",required:"",class:"q-mb-md"},null,8,["modelValue"]),t(Q,{label:"Visningstid f\xF6r sliden",modelValue:e.value.time,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.time=a),outlined:"",required:"",type:"number",class:"q-mb-lg"},null,8,["modelValue"]),i("div",null,[t(v(X),{modelValue:e.value.content,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.content=a),language:"en-US",onOnUploadImg:N},null,8,["modelValue"])])]),_:1},8,["onSubmit"])):V("",!0)])])]),t(J,{show:g.value,"onUpdate:show":l[4]||(l[4]=a=>g.value=a)},null,8,["show"])]),_:1}))}});export{he as default};
