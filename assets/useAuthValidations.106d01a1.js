import{h as R,r as i,aj as S,ak as E,o as _,j as z,k as I,q as V,al as j,H as P,n as q,am as B,S as Z,an as $,ao as k}from"./index.334c6e8c.js";var D=R({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validation-success","validation-error"],setup(n,{slots:f,emit:d}){const h=V(),l=i(null);let r=0;const s=[];function p(e){const u=typeof e=="boolean"?e:n.noErrorFocus!==!0,v=++r,x=(t,o)=>{d("validation-"+(t===!0?"success":"error"),o)},A=t=>{const o=t.validate();return typeof o.then=="function"?o.then(a=>({valid:a,comp:t}),a=>({valid:!1,comp:t,err:a})):Promise.resolve({valid:o,comp:t})};return(n.greedy===!0?Promise.all(s.map(A)).then(t=>t.filter(o=>o.valid!==!0)):s.reduce((t,o)=>t.then(()=>A(o).then(a=>{if(a.valid===!1)return Promise.reject(a)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return v===r&&x(!0),!0;if(v===r){const{comp:o,err:a}=t[0];if(a!==void 0&&console.error(a),x(!1,o),u===!0){const C=t.find(({comp:F})=>typeof F.focus=="function"&&j(F.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function y(){r++,s.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function b(e){e!==void 0&&P(e);const u=r+1;p().then(v=>{u===r&&v===!0&&(n.onSubmit!==void 0?d("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function g(e){e!==void 0&&P(e),d("reset"),q(()=>{y(),n.autofocus===!0&&n.noResetFocus!==!0&&m()})}function m(){B(()=>{if(l.value===null)return;const e=l.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(l.value.querySelectorAll("[tabindex]"),u=>u.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}Z($,{bindComponent(e){s.push(e)},unbindComponent(e){const u=s.indexOf(e);u>-1&&s.splice(u,1)}});let c=!1;return S(()=>{c=!0}),E(()=>{c===!0&&n.autofocus===!0&&m()}),_(()=>{n.autofocus===!0&&m()}),Object.assign(h.proxy,{validate:p,resetValidation:y,submit:b,reset:g,focus:m,getValidationComponents:()=>s}),()=>z("form",{class:"q-form",ref:l,onSubmit:b,onReset:g},I(f.default))}});function M(){const n=k(),f=i(!0),d=i(""),h=i(null),l=i(!1),r=i(""),s=i(!1);return{props:n,form:h,validInputs:f,email:d,email_test:/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,password_test:/^([a-zA-Z0-9"]{8,15})$/,name_test:/^[a-zA-zäöåÄÖÅ,.'-]+$/,testRules:(c,e)=>c.test(e)||f.value,testRulesClass:(c,e)=>c.test(e)||f.value?"shadow-0":"",authError:l,authErrorMessage:r,loading:s}}export{D as Q,M as u};
