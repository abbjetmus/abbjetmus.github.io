import{t as h,q as F,r as v,w as V,z as j,v as m,aw as L,x as M,aO as A,a8 as H,k as _,l as Q,F as O,m as K,ai as I,ac as g,ab as f,Y as W,al as T,ag as B,aP as Y,aM as G}from"./index.ae99ad44.js";import{Q as J,a as X}from"./QItem.4a94c215.js";import{Q as Z}from"./QList.10a153e4.js";import{Q as ee}from"./QMenu.46e28889.js";import{C as te}from"./ClosePopup.f83d1bdb.js";import{u as ne}from"./position-engine.8177d215.js";import{r as ae,f as ie,l as le,h as oe,i as re}from"./auth.da776fb7.js";const se={ratio:[String,Number]};function ue(e,t){return h(()=>{const l=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const ce=16/9;var de=F({name:"QImg",props:{...se,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ce},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:l}){const o=v(e.initialRatio),r=ue(e,o);let s;const d=[v(null),v(C())],a=v(0),u=v(!1),c=v(!1),b=h(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),w=h(()=>({width:e.width,height:e.height})),z=h(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),E=h(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));V(()=>k(),x);function k(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function C(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function x(n){clearTimeout(s),c.value=!1,n===null?(u.value=!1,d[a.value^1].value=C()):u.value=!0,d[a.value].value=n}function N({target:n}){s!==null&&(clearTimeout(s),o.value=n.naturalHeight===0?.5:n.naturalWidth/n.naturalHeight,U(n,1))}function U(n,y){s===null||y===1e3||(n.complete===!0?P(n):s=setTimeout(()=>{U(n,y+1)},50))}function P(n){s!==null&&(a.value=a.value^1,d[a.value].value=null,u.value=!1,c.value=!1,l("load",n.currentSrc||n.src))}function $(n){clearTimeout(s),u.value=!1,c.value=!0,d[a.value].value=null,d[a.value^1].value=C(),l("error",n)}function q(n){const y=d[n].value,S={key:"img_"+n,class:z.value,style:E.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...y};return a.value===n?(S.class+=" q-img__image--waiting",Object.assign(S,{onLoad:N,onError:$})):S.class+=" q-img__image--loaded",m("div",{class:"q-img__container absolute-full",key:"img"+n},m("img",S))}function D(){return u.value!==!0?m("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},M(t[c.value===!0?"error":"default"])):m("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[m(A,{color:e.spinnerColor,size:e.spinnerSize})])}return x(k()),j(()=>{clearTimeout(s),s=null}),()=>{const n=[];return r.value!==null&&n.push(m("div",{key:"filler",style:r.value})),c.value!==!0&&(d[0].value!==null&&n.push(q(0)),d[1].value!==null&&n.push(q(1))),n.push(m(L,{name:"q-transition--fade"},D)),m("div",{class:b.value,style:w.value,role:"img","aria-label":e.alt},n)}}});function me(e){const t=document.createElement("textarea");t.value=e,t.contentEditable="true",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();const l=document.execCommand("copy");return t.remove(),l}function ge(e){return navigator.clipboard!==void 0?navigator.clipboard.writeText(e):new Promise((t,l)=>{const o=me(e);o?t(!0):l(o)})}const fe={class:"row q-gutter-md"},Ue=H({__name:"ImagesComponent",emits:["reload"],setup(e,{emit:t}){const l=ae(ie,"/images"),o=v([]);le(l).then(a=>{a.prefixes.forEach(u=>{}),a.items.forEach(async u=>{const c=await oe(u.fullPath);o.value.push({imageUrl:c,fullPath:u.fullPath})})}).catch(a=>{});const r=ne(),s=async a=>{ge(a).then(()=>{r.notify({color:"success",position:"bottom",message:"Bilden l\xE4nken har kopierats!"})}).catch(()=>{console.log("fail!")})},d=async a=>{await re(a)?(r.notify({color:"success",position:"bottom",message:"Bilden har raderats!"}),t("reload")):r.notify({color:"error",position:"bottom",message:"Misslyckades radera bilden!"})};return(a,u)=>(_(),Q("div",fe,[(_(!0),Q(O,null,K(o.value,(c,b)=>(_(),I(G,{class:"relative-position",key:b,style:{"min-width":"300px",height:"auto !important"}},{default:g(()=>[f(de,{src:c.imageUrl},null,8,["src"]),f(B,{color:"white","text-color":"black",unelevated:"",size:"sm",label:"mer",style:{position:"absolute",top:"10px",right:"10px"}},{default:g(()=>[f(ee,{"touch-position":""},{default:g(()=>[f(Z,{style:{"min-width":"160px"}},{default:g(()=>[W((_(),I(J,{clickable:"",onClick:w=>d(c.fullPath)},{default:g(()=>[f(X,null,{default:g(()=>[T("Radera")]),_:1})]),_:2},1032,["onClick"])),[[te]])]),_:2},1024)]),_:2},1024)]),_:2},1024),f(Y,null,{default:g(()=>[f(B,{color:"primary",unelevated:"",class:"full-width",onClick:w=>s(c.imageUrl)},{default:g(()=>[T("Kopiera l\xE4nk ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]))}});let p;const ve=new Uint8Array(16);function he(){if(!p&&(p=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!p))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return p(ve)}const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function ye(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}const Se=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var R={randomUUID:Se};function qe(e,t,l){if(R.randomUUID&&!t&&!e)return R.randomUUID();e=e||{};const o=e.random||(e.rng||he)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){l=l||0;for(let r=0;r<16;++r)t[l+r]=o[r];return t}return ye(o)}export{Ue as _,qe as v};
