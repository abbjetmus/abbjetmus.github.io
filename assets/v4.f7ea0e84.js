import{x as y,A as D,r as h,w as F,D as V,t as m,aR as L,B as A,bj as M,q as H,k as p,l as B,F as O,m as K,ak as I,ae as g,z as v,a1 as W,an as R,aj as T,bk as G,bd as J}from"./index.27168f00.js";import{Q as X,a as Y}from"./QItem.dcbde1dc.js";import{Q as Z}from"./QList.52063574.js";import{u as ee,Q as te}from"./QMenu.ee1224d5.js";import{C as ne}from"./ClosePopup.6600fcf3.js";import{r as ie,f as ae,l as le,h as oe,i as re}from"./auth.fb2142c6.js";const se={ratio:[String,Number]};function ue(e,t){return y(()=>{const a=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(a)!==!0&&a>0?{paddingBottom:`${100/a}%`}:null})}const ce=16/9;var de=D({name:"QImg",props:{...se,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ce},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:a}){const o=h(e.initialRatio),u=ue(e,o);let s;const c=[h(null),h(k())],d=h(0),r=h(!1),l=h(!1),f=y(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),w=y(()=>({width:e.width,height:e.height})),C=y(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),E=y(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));F(()=>x(),U);function x(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function k(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function U(n){clearTimeout(s),l.value=!1,n===null?(r.value=!1,c[d.value^1].value=k()):r.value=!0,c[d.value].value=n}function N({target:n}){s!==null&&(clearTimeout(s),o.value=n.naturalHeight===0?.5:n.naturalWidth/n.naturalHeight,q(n,1))}function q(n,S){s===null||S===1e3||(n.complete===!0?P(n):s=setTimeout(()=>{q(n,S+1)},50))}function P(n){s!==null&&(d.value=d.value^1,c[d.value].value=null,r.value=!1,l.value=!1,a("load",n.currentSrc||n.src))}function $(n){clearTimeout(s),r.value=!1,l.value=!0,c[d.value].value=null,c[d.value^1].value=k(),a("error",n)}function Q(n){const S=c[n].value,b={key:"img_"+n,class:C.value,style:E.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...S};return d.value===n?(b.class+=" q-img__image--waiting",Object.assign(b,{onLoad:N,onError:$})):b.class+=" q-img__image--loaded",m("div",{class:"q-img__container absolute-full",key:"img"+n},m("img",b))}function j(){return r.value!==!0?m("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},A(t[l.value===!0?"error":"default"])):m("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[m(M,{color:e.spinnerColor,size:e.spinnerSize})])}return U(x()),V(()=>{clearTimeout(s),s=null}),()=>{const n=[];return u.value!==null&&n.push(m("div",{key:"filler",style:u.value})),l.value!==!0&&(c[0].value!==null&&n.push(Q(0)),c[1].value!==null&&n.push(Q(1))),n.push(m(L,{name:"q-transition--fade"},j)),m("div",{class:f.value,style:w.value,role:"img","aria-label":e.alt},n)}}});function me(e){const t=document.createElement("textarea");t.value=e,t.contentEditable="true",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();const a=document.execCommand("copy");return t.remove(),a}function ge(e){return navigator.clipboard!==void 0?navigator.clipboard.writeText(e):new Promise((t,a)=>{const o=me(e);o?t(!0):a(o)})}const fe={class:"row q-gutter-md"},xe=H({__name:"ImagesComponent",emits:["reload"],setup(e,{emit:t}){const a=t,o=ie(ae,"/images"),u=h([]);le(o).then(r=>{r.prefixes.forEach(l=>{}),r.items.forEach(async l=>{const f=await oe(l.fullPath);u.value.push({imageUrl:f,fullPath:l.fullPath})})}).catch(r=>{});const s=ee(),c=async r=>{ge(r).then(()=>{s.notify({color:"success",position:"bottom",message:"Bilden l\xE4nken har kopierats!"})}).catch(()=>{console.log("fail!")})},d=async r=>{await re(r)?(s.notify({color:"success",position:"bottom",message:"Bilden har raderats!"}),a("reload")):s.notify({color:"error",position:"bottom",message:"Misslyckades radera bilden!"})};return(r,l)=>(p(),B("div",fe,[(p(!0),B(O,null,K(u.value,(f,w)=>(p(),I(J,{class:"relative-position",key:w,style:{"min-width":"300px",height:"auto !important"}},{default:g(()=>[v(de,{src:f.imageUrl},null,8,["src"]),v(T,{color:"white","text-color":"black",unelevated:"",size:"sm",label:"mer",style:{position:"absolute",top:"10px",right:"10px"}},{default:g(()=>[v(te,{"touch-position":""},{default:g(()=>[v(Z,{style:{"min-width":"160px"}},{default:g(()=>[W((p(),I(X,{clickable:"",onClick:C=>d(f.fullPath)},{default:g(()=>[v(Y,null,{default:g(()=>l[0]||(l[0]=[R("Radera")])),_:1})]),_:2},1032,["onClick"])),[[ne]])]),_:2},1024)]),_:2},1024)]),_:2},1024),v(G,null,{default:g(()=>[v(T,{color:"primary",unelevated:"",class:"full-width",onClick:C=>c(f.imageUrl)},{default:g(()=>l[1]||(l[1]=[R("Kopiera l\xE4nk ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]))}});let _;const ve=new Uint8Array(16);function he(){if(!_&&(_=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(ve)}const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function ye(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}const Se=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var z={randomUUID:Se};function Ue(e,t,a){if(z.randomUUID&&!t&&!e)return z.randomUUID();e=e||{};const o=e.random||(e.rng||he)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){a=a||0;for(let u=0;u<16;++u)t[a+u]=o[u];return t}return ye(o)}export{xe as _,Ue as v};
